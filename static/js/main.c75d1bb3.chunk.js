(this.webpackJsonpwheresthefood=this.webpackJsonpwheresthefood||[]).push([[0],[,,,,,,,,,,function(e,t,a){},,function(e,t,a){e.exports=a.p+"static/media/star.45dd5470.png"},function(e,t,a){e.exports=a.p+"static/media/defaultImage.e0b45e7f.jpg"},function(e,t,a){e.exports=a(21)},,,,,,function(e,t,a){e.exports=a.p+"static/media/loading.1151080c.gif"},function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(11),r=a.n(o),c=a(1),l=a.n(c),i=a(3),u=a(4),m=a(5),d=a(7),p=a(6),h=a(2),f=a(8),g=(a(20),a(10),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleLocationChange=function(){var e=a.autocomplete.getPlace();console.log(e),e.geometry?a.props.geocode({lat:e.geometry.location.lat(),lng:e.geometry.location.lng()}):console.log("Invalid Input")},a.handleSearchChange=function(e){var t=e.target.value;a.setState({query:t})},a.handleKeyPress=function(e){"Enter"===e.key&&(e.preventDefault(),"location"===e.target.name&&document.getElementsByName("query")[0].focus(),"query"===e.target.name&&a.props.searchRestaurant(a.state.query))},a.handleOnClick=function(){a.state.query?a.props.searchRestaurant(a.state.query):console.log("nearby restaurants")},a.state={query:"",loading:!1},a.autocompleteInput=s.a.createRef(),a.autocomplete=null,a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"handleLoad",value:function(){console.log(document.getElementsByClassName(".home")[0])}},{key:"componentDidMount",value:function(){setTimeout((function(){document.getElementsByTagName("form")[0].style.display="flex",document.getElementsByClassName("loader")[0].style.display="none"}),2e3),this.autocomplete=new google.maps.places.Autocomplete(this.autocompleteInput.current,{types:["geocode"],componentRestrictions:{country:"au"}}),this.autocomplete.addListener("place_changed",this.handleLocationChange)}},{key:"render",value:function(){return s.a.createElement("form",{className:this.props.status?"form form-searching":"form",onSubmit:function(e){return e.preventDefault()}},s.a.createElement("h1",null,"w",s.a.createElement("span",{className:"spread spread-out"},"here's"),"t",s.a.createElement("span",{className:"spread spread-out"},"he"),"f",s.a.createElement("span",{className:"spread spread-out"},"ood"),"?")," ",s.a.createElement("div",{className:this.props.loading?"loading":"not-loading"}),s.a.createElement("input",{className:"location-input input",ref:this.autocompleteInput,id:"autocomplete",type:"text",placeholder:this.props.location.city,name:"location",onKeyPress:this.handleKeyPress}),s.a.createElement("input",{className:"text-input input",type:"text",placeholder:"Search for Restaurants or Cusines",onChange:this.handleSearchChange,name:"query",onKeyPress:this.handleKeyPress,autoComplete:"off"}),s.a.createElement("button",{className:"search-btn btn",type:"submit",onClick:this.handleOnClick},"search"))}}]),t}(n.Component)),y=a(12),v=a.n(y),b=a(13),E=a.n(b),N=function(e){var t=e.restaurants,a=e.status,n=e.modalOn;return s.a.createElement("div",{className:0===t.length?"hide":"restaurant-list"},t.map((function(e){return s.a.createElement("div",{key:e.restaurant.id,id:"box",className:a?"display":"hide"},s.a.createElement("div",{className:"box-title"},s.a.createElement("h2",null,e.restaurant.name),s.a.createElement("p",null,e.restaurant.establishment)),s.a.createElement("img",{className:"box-img",src:""===e.restaurant.thumb?E.a:e.restaurant.thumb,alt:"food"}),s.a.createElement("p",{className:"box-location"},e.restaurant.location.address),s.a.createElement("div",{className:"box-rating"},s.a.createElement("p",{className:"rate-number"},e.restaurant.user_rating.aggregate_rating),s.a.createElement("div",{className:"star"},s.a.createElement("img",{src:v.a,alt:"user-rating"}))),s.a.createElement("div",{className:"contact"},s.a.createElement("button",{className:"call-btn",onClick:function(){return n(e.restaurant)}},"More")),s.a.createElement("p",{className:"box-time"},e.restaurant.timings))})))},k=function(e){var t=e.modal,a=e.modalInfo,n=e.modalClose;return s.a.createElement("div",{className:t?"modal":"hide"},s.a.createElement("div",{className:"modal-card"},s.a.createElement("div",{className:"modal-title"},s.a.createElement("h3",null,a.name),s.a.createElement("button",{className:"modal-btn",onClick:function(){return n()}},"Close")),s.a.createElement("div",{className:"location-details"},s.a.createElement("div",{className:"details"},s.a.createElement("div",{className:"contact"},"Phone Number: ",s.a.createElement("a",{href:"tel".concat(a.phone_numbers)},a.phone_numbers)),s.a.createElement("div",{id:"map"}),s.a.createElement("div",{className:"address"},"Address: ",a.location)))))},x=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).modalOn=function(e){a.initMap(e.location);var t=e.name,n=e.phone_numbers,s=e.location;a.setState({modal:!a.state.modal,modalInfo:{name:t,phone_numbers:n,location:s.address}})},a.modalClose=function(){a.setState({modal:!1})},a.handleLoad=function(){setTimeout((function(){console.log(document.getElementsById("loader")[0])}),3e3)},a.state={location:{},coords:{},collections:[],nearbyRestaurants:[],restaurants:[],display:!1,status:!1,loading:!1,modal:!1,modalInfo:{},map:{},infowindow:{},service:{}},a.geocode=a.geocode.bind(Object(h.a)(a)),a.searchRestaurant=a.searchRestaurant.bind(Object(h.a)(a)),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"ipLookUp",value:function(){var e=Object(i.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://api.ipstack.com/check?access_key=".concat("072fa38063b662067658cd84e919bba6"));case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,this.setState({location:a}),n={lat:a.latitude,lng:a.longitude},this.getCollections(n),e.abrupt("return",n);case 13:throw e.prev=13,e.t0=e.catch(0),new Error("Request failed");case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"getCollections",value:function(){var e=Object(i.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://developers.zomato.com/api/v2.1/collections?lat=".concat(t.lat,"&lon=").concat(t.lng,"&count=6"),{method:"get",headers:{"user-key":"25f2e3832a5e7b4005c9517429793064",accept:"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,this.setState({collections:n.collections});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"geocode",value:function(){var e=Object(i.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://developers.zomato.com/api/v2.1/geocode?lat=".concat(t.lat,"&lon=").concat(t.lng),{method:"get",headers:{"user-key":"25f2e3832a5e7b4005c9517429793064",accept:"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,this.setState({location:n.location,nearbyRestaurants:n.nearby_restaurants});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchRestaurant",value:function(){var e=Object(i.a)(l.a.mark((function e(t){var a,n,s=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=12;break}return this.setState({display:!1,loading:!0}),e.next=4,fetch("https://developers.zomato.com/api/v2.1/search?entity_id=".concat(this.state.location.entity_id,"&entity_type=subzone&q=").concat(t,"&count=9"),{method:"get",headers:{"user-key":"25f2e3832a5e7b4005c9517429793064",accept:"application/json"}});case 4:return a=e.sent,e.next=7,a.json();case 7:n=e.sent,this.setState({restaurants:n.restaurants}),setTimeout((function(){s.setState({display:!0,status:!0,loading:!1})}),1e3),e.next=13;break;case 12:this.setState({restaurants:this.state.nearbyRestaurants});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"initMap",value:function(e){var t=new google.maps.LatLng(e.latitude,e.longitude),a=new google.maps.Map(document.getElementById("map"),{center:t,zoom:15}),n={query:e.address,fields:["name","geometry"]};new google.maps.places.PlacesService(a).findPlaceFromQuery(n,(function(e,t){if(t===google.maps.places.PlacesServiceStatus.OK){for(var n=0;n<e.length;n++)new google.maps.Marker({map:a,position:e[n].geometry.location});a.setCenter(e[0].geometry.location)}}))}},{key:"componentDidMount",value:function(){this.ipLookUp()}},{key:"render",value:function(){return s.a.createElement("div",{className:"home"},s.a.createElement(g,{status:this.state.status,location:this.state.location,geocode:this.geocode,searchRestaurant:this.searchRestaurant,loading:this.state.loading}),s.a.createElement(N,{restaurants:this.state.restaurants,status:this.state.display,modal:this.state.modal,modalOn:this.modalOn,modalInfo:this.state.modalInfo}),s.a.createElement(k,{modal:this.state.modal,modalInfo:this.state.modalInfo,modalClose:this.modalClose}),s.a.createElement("div",{className:"loader"}))}}]),t}(n.Component);var j=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(x,null))};r.a.render(s.a.createElement(j,null),document.getElementById("root"))}],[[14,1,2]]]);
//# sourceMappingURL=main.c75d1bb3.chunk.js.map